<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tread and Trails</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #1a2b35 0%, #2c4756 100%);
            color: #fff;
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* --- Auth Overlay --- */
        #auth-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(26, 43, 53, 0.95);
            backdrop-filter: blur(10px);
            z-index: 200;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: opacity 0.5s ease;
        }

        .auth-container {
            background: rgba(255, 255, 255, 0.05);
            padding: 3rem;
            border-radius: 20px;
            text-align: center;
            width: 90%;
            max-width: 450px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .auth-container h2 {
            font-size: 2rem;
            margin-bottom: 0.5rem;
             background: linear-gradient(45deg, #fff, #ff6b35);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .auth-container p {
            margin-bottom: 2rem;
            color: rgba(255, 255, 255, 0.7);
        }

        .auth-tabs {
            display: flex;
            background: rgba(0,0,0,0.2);
            border-radius: 15px;
            margin-bottom: 2rem;
            overflow: hidden;
        }

        .auth-tab {
            flex: 1;
            padding: 1rem;
            border: none;
            background: none;
            color: #fff;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
            font-size: 1rem;
        }

        .auth-tab.active {
            background: linear-gradient(45deg, #ff6b35, #f7931e);
            box-shadow: 0 5px 15px rgba(255, 107, 53, 0.4);
        }
        
        .auth-form {
            display: none;
            flex-direction: column;
            gap: 1rem;
        }
        
        .auth-form.active {
            display: flex;
        }
        
        .auth-form input {
            width: 100%;
            padding: 1rem;
            border: none;
            border-radius: 10px;
            background: rgba(255, 255, 255, 0.1);
            color: #fff;
            font-size: 1rem;
            border: 2px solid transparent;
            transition: all 0.3s ease;
        }
        
        .auth-form input:focus {
            outline: none;
            border-color: #ff6b35;
            background: rgba(255, 255, 255, 0.15);
        }
        
        .guest-login {
            margin-top: 1.5rem;
        }

        .guest-login a {
            color: rgba(255, 255, 255, 0.6);
            text-decoration: none;
            transition: color 0.3s ease;
        }

        .guest-login a:hover {
            color: #ff6b35;
        }

        /* Header */
        .header {
            background: rgba(26, 43, 53, 0.9);
            backdrop-filter: blur(10px);
            padding: 1rem 0;
            box-shadow: 0 4px 20px rgba(0,0,0,0.3);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 2rem;
            font-weight: bold;
            background: linear-gradient(45deg, #ff6b35, #f7931e);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .nav-links {
            display: flex;
            list-style: none;
            gap: 2rem;
            align-items: center;
        }

        .nav-links a {
            color: #fff;
            text-decoration: none;
            padding: 0.5rem 1rem;
            border-radius: 25px;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .nav-links a:hover {
            background: linear-gradient(45deg, #ff6b35, #f7931e);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 107, 53, 0.4);
        }

        .user-menu {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .profile-btn {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(45deg, #ff6b35, #f7931e);
            border: none;
            color: white;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.3s ease;
        }

        .profile-btn:hover {
            transform: scale(1.1);
        }

        /* Main Content */
        .main-content {
            padding: 2rem 0;
        }

        .hero {
            text-align: center;
            padding: 4rem 0;
            background: linear-gradient(rgba(0,0,0,0.4), rgba(0,0,0,0.4)), url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 800"><path fill="%23ff6b35" opacity="0.1" d="M0,400 Q300,200 600,400 T1200,400 L1200,0 L0,0 Z"/></svg>');
            background-size: cover;
            border-radius: 20px;
            margin-bottom: 3rem;
        }

        .hero h1 {
            font-size: 3.5rem;
            margin-bottom: 1rem;
            background: linear-gradient(45deg, #fff, #ff6b35);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .hero p {
            font-size: 1.2rem;
            margin-bottom: 2rem;
            opacity: 0.9;
        }

        .cta-buttons {
            display: flex;
            gap: 1rem;
            justify-content: center;
            flex-wrap: wrap;
        }

        .btn {
            padding: 1rem 2rem;
            border: none;
            border-radius: 30px;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
            position: relative;
            overflow: hidden;
        }

        .btn-primary {
            background: linear-gradient(45deg, #ff6b35, #f7931e);
            color: white;
        }

        .btn-secondary {
            background: rgba(255, 255, 255, 0.1);
            color: white;
            border: 2px solid rgba(255, 255, 255, 0.3);
        }

        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }

        .btn-primary:hover {
            box-shadow: 0 10px 30px rgba(255, 107, 53, 0.4);
        }

        /* Tabs */
        .tabs {
            display: flex;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 0.5rem;
            margin-bottom: 2rem;
            backdrop-filter: blur(10px);
        }

        .tab {
            flex: 1;
            padding: 1rem;
            text-align: center;
            border: none;
            background: none;
            color: #fff;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
        }

        .tab.active {
            background: linear-gradient(45deg, #ff6b35, #f7931e);
            box-shadow: 0 5px 15px rgba(255, 107, 53, 0.4);
        }

        .tab:hover:not(.active) {
            background: rgba(255, 255, 255, 0.1);
        }

        /* Content Sections */
        .content-section {
            display: none;
            animation: fadeIn 0.5s ease;
        }

        .content-section.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Marketplace Filters */
        .filters {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 2rem;
            margin-bottom: 2rem;
            backdrop-filter: blur(10px);
        }

        .filter-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .filter-group {
            display: flex;
            flex-direction: column;
        }

        .filter-group label {
            margin-bottom: 0.5rem;
            font-weight: bold;
            color: #fff;
        }

        .filter-group select, .filter-group input {
            padding: 0.75rem;
            border: none;
            border-radius: 10px;
            background: rgba(255, 255, 255, 0.1);
            color: #fff;
            font-size: 1rem;
        }

        .filter-group select option {
            background: #1a2b35;
            color: #fff;
        }

        /* Product Grid */
        .product-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 2rem;
            margin-top: 2rem;
        }

        .product-card {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            overflow: hidden;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .product-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 20px 40px rgba(0,0,0,0.3);
            border-color: rgba(255, 107, 53, 0.5);
        }

        .product-image {
            height: 200px;
            position: relative;
            overflow: hidden;
            background-color: #2c4756;
        }
        
        .product-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.3s ease;
        }

        .product-card:hover .product-image img {
            transform: scale(1.05);
        }

        .product-info {
            padding: 1.5rem;
        }

        .product-title {
            font-size: 1.2rem;
            font-weight: bold;
            margin-bottom: 0.5rem;
            color: #fff;
        }

        .product-price {
            font-size: 1.5rem;
            font-weight: bold;
            color: #ff6b35;
            margin-bottom: 0.5rem;
        }

        .product-description {
            color: rgba(255, 255, 255, 0.7);
            margin-bottom: 1rem;
            line-height: 1.4;
        }

        .product-actions {
            display: flex;
            gap: 0.5rem;
            justify-content: space-between;
            align-items: center;
        }

        .like-btn, .share-btn, .message-btn {
            background: rgba(255, 255, 255, 0.1);
            border: none;
            color: #fff;
            padding: 0.5rem;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1.2rem;
        }

        .like-btn:hover, .share-btn:hover, .message-btn:hover {
            background: rgba(255, 107, 53, 0.3);
            transform: scale(1.1);
        }

        .like-btn.liked {
            background: #ff6b35;
        }

        .verified-badge {
            background: #28a745;
            color: white;
            padding: 0.2rem 0.5rem;
            border-radius: 10px;
            font-size: 0.8rem;
            font-weight: bold;
            display: inline-flex;
            align-items: center;
            gap: 0.2rem;
        }

        /* Post Form */
        .post-form {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 2rem;
            backdrop-filter: blur(10px);
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: bold;
            color: #fff;
        }

        .form-group input, .form-group select, .form-group textarea {
            width: 100%;
            padding: 1rem;
            border: none;
            border-radius: 10px;
            background: rgba(255, 255, 255, 0.1);
            color: #fff;
            font-size: 1rem;
            border: 2px solid transparent;
            transition: all 0.3s ease;
        }

        .form-group input:focus, .form-group select:focus, .form-group textarea:focus {
            outline: none;
            border-color: #ff6b35;
            background: rgba(255, 255, 255, 0.15);
        }

        .form-group select option {
            background: #1a2b35;
            color: #fff;
        }

        .file-upload {
            border: 2px dashed rgba(255, 255, 255, 0.3);
            border-radius: 10px;
            padding: 2rem;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .file-upload:hover {
            border-color: #ff6b35;
            background: rgba(255, 107, 53, 0.1);
        }
        
        /* --- Messages Section --- */
        .messaging-layout {
            display: flex;
            gap: 1.5rem;
            height: 70vh;
            max-height: 700px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 1.5rem;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.1);
        }

        .conversation-list {
            flex: 0 0 300px;
            overflow-y: auto;
            border-right: 1px solid rgba(255, 255, 255, 0.1);
            padding-right: 1.5rem;
        }

        .conversation-item {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1rem;
            border-radius: 10px;
            cursor: pointer;
            transition: background 0.3s ease;
            margin-bottom: 0.5rem;
        }

        .conversation-item:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        .conversation-item.active {
            background: #ff6b35;
        }

        .conversation-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(45deg, #ff6b35, #f7931e);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: white;
            flex-shrink: 0;
        }

        .conversation-details {
             overflow: hidden;
        }

        .conversation-details p {
            margin: 0;
            line-height: 1.3;
        }

        .conversation-user {
            font-weight: bold;
        }

        .conversation-preview {
            font-size: 0.9rem;
            color: rgba(255, 255, 255, 0.7);
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .chat-window {
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }
        
        .message-list {
            flex: 1;
            overflow-y: auto;
            margin-bottom: 1rem;
            padding-right: 1rem;
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .message {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 1rem;
            border-left: 4px solid #ff6b35;
            max-width: 80%;
            align-self: flex-start;
        }
        
        .message.from-me {
            background: rgba(255, 107, 53, 0.2);
            border-left: none;
            border-right: 4px solid #ff6b35;
            align-self: flex-end;
        }

        .message-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.5rem;
        }

        .message-sender {
            font-weight: bold;
            color: #ff6b35;
        }
        
        .message.from-me .message-sender {
            color: #f7931e;
        }

        .message-time {
            color: rgba(255, 255, 255, 0.6);
            font-size: 0.9rem;
        }

        .message-input {
            display: flex;
            gap: 1rem;
        }

        .message-input input {
            flex: 1;
            padding: 1rem;
            border: none;
            border-radius: 25px;
            background: rgba(255, 255, 255, 0.1);
            color: #fff;
        }

        .send-btn {
            padding: 1rem 2rem;
            border: none;
            border-radius: 25px;
            background: linear-gradient(45deg, #ff6b35, #f7931e);
            color: white;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .send-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 107, 53, 0.4);
        }

        /* Community Posts */
        .post {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 2rem;
            margin-bottom: 2rem;
            backdrop-filter: blur(10px);
        }

        .post-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .post-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: linear-gradient(45deg, #ff6b35, #f7931e);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: white;
        }

        .post-meta {
            flex: 1;
        }

        .post-author {
            font-weight: bold;
            color: #fff;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .post-time {
            color: rgba(255, 255, 255, 0.6);
            font-size: 0.9rem;
        }

        .post-content {
            margin-bottom: 1rem;
            line-height: 1.6;
        }

        .post-image {
            width: 100%;
            height: 300px;
            border-radius: 10px;
            margin: 1rem 0;
            position: relative;
            overflow: hidden;
            background-color: #2c4756;
        }
        
        .post-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }


        .post-actions {
            display: flex;
            gap: 1rem;
            align-items: center;
            padding-top: 1rem;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

        .post-action {
            background: none;
            border: none;
            color: rgba(255, 255, 255, 0.7);
            cursor: pointer;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .post-action:hover {
            background: rgba(255, 255, 255, 0.1);
            color: #fff;
        }

        .post-action.active {
            color: #ff6b35;
            background: rgba(255, 107, 53, 0.1);
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .nav-links {
                display: none;
            }

            .hero h1 {
                font-size: 2.5rem;
            }

            .cta-buttons {
                flex-direction: column;
                align-items: center;
            }

            .filter-grid {
                grid-template-columns: 1fr;
            }

            .product-grid {
                grid-template-columns: 1fr;
            }

            .tabs {
                flex-direction: column;
                gap: 0.5rem;
            }
            
            .messaging-layout {
                flex-direction: column;
                height: 80vh;
            }
            
            .conversation-list {
                flex: 0 0 120px;
                border-right: none;
                border-bottom: 1px solid rgba(255,255,255,0.1);
                padding-right: 0;
                padding-bottom: 1rem;
                display: flex;
                flex-direction: row;
                gap: 1rem;
            }
            
            .conversation-item {
                flex-direction: column;
                gap: 0.5rem;
                padding: 0.5rem;
                text-align: center;
            }
            
            .conversation-preview {
                display: none;
            }

        }

        /* Utility Classes */
        .hidden { display: none; }
        .text-center { text-align: center; }
        .mb-2 { margin-bottom: 1rem; }
        .mt-2 { margin-top: 1rem; }

        /* Animations */
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }

        .loading {
            animation: pulse 2s infinite;
        }
    </style>
</head>
<body>

    <div id="auth-overlay">
        <div class="auth-container">
            <div class="auth-tabs">
                <button id="signup-tab" class="auth-tab active" onclick="switchAuthTab('signup')">Sign Up</button>
                <button id="login-tab" class="auth-tab" onclick="switchAuthTab('login')">Login</button>
            </div>
            
            <form id="signup-form" class="auth-form active">
                <h2>Join the Community</h2>
                <p>Create an account to buy, sell, and share.</p>
                <input type="text" placeholder="Username" required>
                <input type="email" placeholder="Email Address" required>
                <input type="password" placeholder="Password" required>
                <button type="submit" class="btn btn-primary">Create Account</button>
            </form>

            <form id="login-form" class="auth-form">
                <h2>Welcome Back!</h2>
                <p>Login to continue your adventure.</p>
                <input type="email" placeholder="Email Address" required>
                <input type="password" placeholder="Password" required>
                <button type="submit" class="btn btn-primary">Login</button>
            </form>

            <div class="guest-login">
                <a href="#" onclick="enterSite(event)">or Continue as a Guest</a>
            </div>
        </div>
    </div>


    <header class="header" style="display: none;">
        <nav class="nav container">
            <div class="logo">Tread & Trails</div>
            <ul class="nav-links">
                <li><a href="#" onclick="showTab('marketplace')">Marketplace</a></li>
                <li><a href="#" onclick="showTab('community')">Community</a></li>
                <li><a href="#" onclick="showTab('messages')">Messages</a></li>
                <li><a href="#" onclick="showTab('post')">Post</a></li>
            </ul>
            <div class="user-menu">
                <button class="profile-btn" onclick="toggleProfile()">JD</button>
            </div>
        </nav>
    </header>

    <main class="main-content container" style="display: none;">
        <!-- Hero Section -->
        <section class="hero">
            <h1>Your 4WD & Camping Community</h1>
            <p>Buy, sell, and share your adventures with fellow off-road enthusiasts</p>
            <div class="cta-buttons">
                <button class="btn btn-primary" onclick="showTab('marketplace')">Browse Marketplace</button>
                <button class="btn btn-secondary" onclick="showTab('post')">Post Your Gear</button>
            </div>
        </section>

        <!-- Navigation Tabs -->
        <div class="tabs">
            <button class="tab active" onclick="showTab('marketplace')">🛒 Marketplace</button>
            <button class="tab" onclick="showTab('community')">👥 Community</button>
            <button class="tab" onclick="showTab('messages')">💬 Messages</button>
            <button class="tab" onclick="showTab('post')">📝 Post</button>
        </div>

        <!-- Marketplace Section -->
        <section id="marketplace" class="content-section active">
            <div class="filters">
                <h3>Search & Filter</h3>
                <div class="filter-grid">
                    <div class="filter-group">
                        <label>Category</label>
                        <select id="category" onchange="updateFilters()">
                            <option value="">All Categories</option>
                            <option value="vehicles">Vehicles</option>
                            <option value="parts">Parts</option>
                            <option value="gear">Camping Gear</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label>Make/Brand</label>
                        <select id="make">
                            <option value="">Any Make</option>
                            <option value="toyota">Toyota</option>
                            <option value="ford">Ford</option>
                            <option value="jeep">Jeep</option>
                            <option value="arb">ARB</option>
                            <option value="tjm">TJM</option>
                            <option value="dometic">Dometic</option>
                            <option value="kings">Adventure Kings</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label>Condition</label>
                        <select id="condition">
                            <option value="">Any Condition</option>
                            <option value="new">New</option>
                            <option value="used">Used</option>
                            <option value="refurbished">Refurbished</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label>Price Range</label>
                        <input type="range" id="priceRange" min="0" max="100000" value="100000" onchange="updatePriceDisplay()">
                        <span id="priceDisplay">Up to $100,000</span>
                    </div>
                </div>
                <button class="btn btn-primary" onclick="applyFilters()">Apply Filters</button>
            </div>

            <div class="product-grid" id="productGrid">
                <!-- Products will be populated by JavaScript -->
            </div>
        </section>

        <!-- Community Section -->
        <section id="community" class="content-section">
            <div id="communityPosts">
                <!-- Posts will be populated by JavaScript -->
            </div>
        </section>

        <!-- Messages Section -->
        <section id="messages" class="content-section">
            <div class="messaging-layout">
                <div class="conversation-list" id="conversationList">
                    <!-- Conversation contacts will be populated here -->
                </div>
                <div class="chat-window">
                    <div class="message-list" id="messageList">
                         <!-- Messages will be populated here -->
                    </div>
                    <div class="message-input">
                        <input type="text" id="messageInput" placeholder="Select a conversation...">
                        <button class="send-btn" onclick="sendMessage()">Send</button>
                    </div>
                </div>
            </div>
        </section>


        <!-- Post Section -->
        <section id="post" class="content-section">
            <div class="post-form">
                <h3>Create New Listing or Post</h3>
                <form id="postForm">
                    <div class="form-group">
                        <label>Post Type</label>
                        <select id="postType" onchange="updatePostForm()">
                            <option value="marketplace">Marketplace Listing</option>
                            <option value="advice">Share Advice</option>
                            <option value="trip">Trip Report</option>
                            <option value="campsite">Campsite Review</option>
                        </select>
                    </div>
                    
                    <div id="marketplaceFields">
                        <div class="form-group">
                            <label>Category</label>
                            <select id="postCategory">
                                <option value="vehicles">Vehicles</option>
                                <option value="parts">Parts</option>
                                <option value="gear">Camping Gear</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Price ($)</label>
                            <input type="number" id="postPrice" placeholder="Enter price">
                        </div>
                    </div>

                    <div class="form-group">
                        <label>Title</label>
                        <input type="text" id="postTitle" placeholder="Enter title" required>
                    </div>

                    <div class="form-group">
                        <label>Description</label>
                        <textarea id="postDescription" rows="5" placeholder="Describe your item or share your experience..." required></textarea>
                    </div>

                    <div class="form-group">
                        <label>Photos/Videos</label>
                        <div class="file-upload" onclick="document.getElementById('fileInput').click()">
                            <p>📸 Click to upload photos or videos</p>
                            <input type="file" id="fileInput" multiple accept="image/*,video/*" style="display: none;">
                        </div>
                    </div>

                    <button type="submit" class="btn btn-primary">Post Now</button>
                </form>
            </div>
        </section>
    </main>

    <script>
        // --- DATA ---
        const products = [
            {
                id: 1,
                title: "2018 Toyota Land Cruiser 200 Series",
                price: 85000,
                category: "vehicles",
                make: "toyota",
                condition: "used",
                description: "Fully equipped tourer with lift kit, winch, and camping setup. Ready for the big lap.",
                verified: true,
                likes: 24,
                seller: "Mike Adventures",
                imageUrl: "https://carsguide-res.cloudinary.com/image/upload/e_trim:10,f_auto/c_scale,t_cg_base,w_345/v1/editorial/vhs/Toyota-LandCruiser_0.png"
            },
            {
                id: 2,
                title: "ARB Rooftop Tent - Simpson III",
                price: 2500,
                category: "gear",
                make: "arb",
                condition: "used",
                description: "Excellent condition rooftop tent, includes annex. Perfect for weekend adventures.",
                verified: false,
                likes: 12,
                seller: "Sarah Camping",
                imageUrl: "https://www.arb.com.au/wp-content/uploads/2014/04/rooftop5.jpg"
            },
            {
                id: 3,
                title: "Ford Ranger Bullbar - ARB Deluxe",
                price: 1200,
                category: "parts",
                make: "arb",
                condition: "new",
                description: "Brand new ARB Deluxe bullbar for Ford Ranger (PX2), still in box. Winch compatible.",
                verified: true,
                likes: 8,
                seller: "Parts Pro",
                imageUrl: "https://www.arb.com.au/wp-content/uploads/2022/05/P5100265.jpg"
            },
            {
                id: 4,
                title: "Adventure Kings Fridge 60L",
                price: 599,
                category: "gear",
                make: "kings",
                condition: "new",
                description: "Portable fridge freezer, perfect for long trips. Comes with 12v and 240v leads.",
                verified: false,
                likes: 15,
                seller: "Gear Hub",
                imageUrl: "https://cdn.productreview.com.au/resize/review-attachment/b3df0283-6b19-49c6-80ea-1ed68a3e62e5?cover=true&v=4&width=720&withoutEnlargement=true"
            },
            {
                id: 5,
                title: "2021 Ford Ranger Wildtrak",
                price: 65000,
                category: "vehicles",
                make: "ford",
                condition: "used",
                description: "Low kms, meticulously maintained. Comes with canopy and drawer system.",
                verified: true,
                likes: 18,
                seller: "Ranger Life",
                imageUrl: "https://carsguide-res.cloudinary.com/image/upload/f_auto,fl_lossy,q_auto,t_default/v1/editorial/segment_review/hero_image/2021-Ford-Ranger-Wildtrak-X-silver-1001x5565.jpeg"
            },
            {
                id: 6,
                title: "TJM Outback Bullbar for Prado 150",
                price: 1800,
                category: "parts",
                make: "tjm",
                condition: "used",
                description: "Used TJM bullbar, a few minor scratches but solid. All fittings included.",
                verified: true,
                likes: 5,
                seller: "PradoParts",
                imageUrl: "https://www.complete4x4.au/wp-content/uploads/2020/04/prado2018.png"
            },
            {
                id: 7,
                title: "Dometic CFX3 75DZ Fridge Freezer",
                price: 1500,
                category: "gear",
                make: "dometic",
                condition: "used",
                description: "Dual zone fridge/freezer, works perfectly. Includes insulated cover and stand.",
                verified: false,
                likes: 22,
                seller: "ColdBeerCarl",
                imageUrl: "https://www.frontrunneroutfitters.com/media/catalog/product/cache/d4dac59584c08d49306c6dda7f8649da/n/_/n_frid099_01.jpg?width=360&height=270&fit=cover"
            },
            {
                id: 8,
                title: "Old Man Emu BP-51 Suspension Kit",
                price: 4500,
                category: "parts",
                make: "old-man-emu",
                condition: "new",
                description: "Brand new, never fitted. Suits Land Cruiser 79 series. The best suspension money can buy.",
                verified: true,
                likes: 9,
                seller: "SuspensionSolutions",
                imageUrl: "https://images.squarespace-cdn.com/content/v1/5d26625bd154b8000136f695/1574409689265-4YGOXR0ZCGM1MLC0XFRP/bp51base_1.jpg"
            }
        ];

        const communityPosts = [
            {
                id: 1,
                author: "TrailBlazer89",
                verified: true,
                time: "2 hours ago",
                content: "Just completed the Canning Stock Route! What an incredible journey. The track conditions were challenging but manageable with proper preparation. Here are some tips for anyone planning this epic adventure...",
                likes: 42,
                comments: 15,
                shares: 8,
                hasImage: true,
                imageUrl: "https://live-production.wcms.abc-cdn.net.au/56895d59cd5e59e6bf33d5120619f4f2?impolicy=wcms_crop_resize&cropH=1381&cropW=2464&xPos=28&yPos=363&width=862&height=485"
            },
            {
                id: 2,
                author: "CampingQueen",
                verified: false,
                time: "5 hours ago",
                content: "Found this amazing free campsite near Karalee Rocks. Crystal clear water, perfect for swimming and fishing. GPS coordinates in comments!",
                likes: 67,
                comments: 23,
                shares: 31,
                hasImage: true,
                imageUrl: "https://images.unsplash.com/photo-1504280390367-361c6d9f38f4?q=80&w=1770&auto=format&fit=crop"
            },
            {
                id: 3,
                author: "MechMaster",
                verified: true,
                time: "1 day ago",
                content: "PSA: Check your diff oils before long trips! Just helped a fellow traveler who lost his diff on the Gibb River Road. Prevention is better than breakdown recovery!",
                likes: 28,
                comments: 9,
                shares: 12,
                hasImage: false
            },
            {
                id: 4,
                author: "JeepLifeAU",
                verified: false,
                time: "2 days ago",
                content: "Any recommendations for a reliable mechanic in the Perth area that specializes in Jeeps? My JK is making a weird noise from the front diff...",
                likes: 12,
                comments: 18,
                shares: 2,
                hasImage: false
            },
            {
                id: 5,
                author: "PatrolPower",
                verified: true,
                time: "3 days ago",
                content: "Finished the new drawer setup in the back of the GU Patrol. So much more organized now! Ready for Fraser Island next month.",
                likes: 55,
                comments: 21,
                shares: 10,
                hasImage: true,
                imageUrl: "https://www.drifta.com.au/wp-content/uploads/2014/01/Nissan-Patrol-Storage-Drawer-Package11.jpg"
            },
            {
                id: 6,
                author: "Newbie4x4",
                verified: false,
                time: "4 days ago",
                content: "First time taking the new rig out to the Glass House Mountains. It was a bit muddy but so much fun! Can't wait to go back.",
                likes: 31,
                comments: 7,
                shares: 3,
                hasImage: true,
                imageUrl: "https://live-production.wcms.abc-cdn.net.au/e5a1fb938ac8fa2beca7663c3bd3f457?impolicy=wcms_crop_resize&cropH=1680&cropW=2237&xPos=574&yPos=0&width=862&height=647"
            }
        ];

        const allMessages = {
            "Mike Adventures": [
                { sender: "Mike Adventures", time: "1 hour ago", content: "Hey, saw you were interested in the Land Cruiser. Let me know if you have questions." }
            ],
            "Sarah Camping": [
                { sender: "You", time: "3 hours ago", content: "Is the rooftop tent still available?" },
                { sender: "Sarah Camping", time: "2 hours ago", content: "Hi! Yes it is." },
                { sender: "You", time: "2 hours ago", content: "Great, could I come see it tomorrow?" },
                { sender: "Sarah Camping", time: "1 hour ago", content: "Sure, tomorrow afternoon works for me." }
            ],
            "Parts Pro": [
                 { sender: "Parts Pro", time: "yesterday", content: "The bullbar is ready for pickup whenever you are." }
            ]
        };


        // --- APP LOGIC ---
        let currentTab = 'marketplace';
        let currentConversation = "Sarah Camping"; // Start with an active conversation
        let likedPosts = new Set();
        let likedProducts = new Set();

        const defaultImageUrl = "https://carsguide-res.cloudinary.com/image/upload/e_trim:10,f_auto/c_scale,t_cg_base,w_345/v1/editorial/vhs/Toyota-LandCruiser_0.png";

        document.addEventListener('DOMContentLoaded', function() {
            // Auth form listeners
            document.getElementById('login-form').addEventListener('submit', enterSite);
            document.getElementById('signup-form').addEventListener('submit', enterSite);

            // Main app listeners
            document.getElementById('postForm').addEventListener('submit', handlePostSubmission);
            document.getElementById('fileInput').addEventListener('change', handleFileUpload);
            document.addEventListener('keydown', (e) => e.key === 'Enter' && e.target.id === 'messageInput' && sendMessage());
        });

        // --- Auth Functions ---
        function switchAuthTab(tabName) {
            document.querySelectorAll('.auth-tab').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.auth-form').forEach(form => form.classList.remove('active'));
            
            document.getElementById(`${tabName}-tab`).classList.add('active');
            document.getElementById(`${tabName}-form`).classList.add('active');
        }

        function enterSite(event) {
            event.preventDefault();
            const authOverlay = document.getElementById('auth-overlay');
            authOverlay.style.opacity = '0';
            
            setTimeout(() => {
                authOverlay.style.display = 'none';
                
                const header = document.querySelector('.header');
                const main = document.querySelector('.main-content');
                header.style.display = 'block';
                main.style.display = 'block';

                // Initialize the main app content now
                renderProducts();
                renderCommunityPosts();
                renderConversations();
                renderMessages();

            }, 500); // Match timeout with CSS transition
        }


        // --- Main App Functions ---
        function showTab(tabName) {
            document.querySelectorAll('.content-section').forEach(section => section.classList.remove('active'));
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            document.getElementById(tabName).classList.add('active');
            // This is a bit brittle, might need a more robust way to find the tab button
            const tabButton = Array.from(document.querySelectorAll('.tab')).find(t => t.textContent.toLowerCase().includes(tabName));
             if (tabButton) {
                tabButton.classList.add('active');
            }
            currentTab = tabName;
        }

        function renderProducts() {
            const grid = document.getElementById('productGrid');
            grid.innerHTML = products.map(product => `
                <div class="product-card" data-category="${product.category}" data-make="${product.make}" data-condition="${product.condition}" data-price="${product.price}">
                    <div class="product-image">
                        <img src="${product.imageUrl || defaultImageUrl}" alt="${product.title}">
                    </div>
                    <div class="product-info">
                        <div class="product-title">${product.title}</div>
                        <div class="product-price">$${product.price.toLocaleString()}</div>
                        <div class="product-description">${product.description}</div>
                        <div class="product-actions">
                            <div style="display: flex; gap: 0.5rem; align-items: center;">
                                <button class="like-btn ${likedProducts.has(product.id) ? 'liked' : ''}" onclick="toggleLike('product', ${product.id})">
                                    ❤️ <span class="like-count">${product.likes}</span>
                                </button>
                                <button class="share-btn" onclick="shareProduct(${product.id})">📤</button>
                                <button class="message-btn" onclick="messageUser('${product.seller}')">💬</button>
                            </div>
                            <div style="display: flex; align-items: center; gap: 0.5rem;">
                                ${product.verified ? '<span class="verified-badge">✓ Verified</span>' : ''}
                                <small style="color: rgba(255,255,255,0.7);">by ${product.seller}</small>
                            </div>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function renderCommunityPosts() {
            const container = document.getElementById('communityPosts');
            container.innerHTML = communityPosts.map(post => `
                <div class="post">
                    <div class="post-header">
                        <div class="post-avatar">${post.author.charAt(0)}</div>
                        <div class="post-meta">
                            <div class="post-author">
                                ${post.author}
                                ${post.verified ? '<span class="verified-badge">✓ Verified</span>' : ''}
                            </div>
                            <div class="post-time">${post.time}</div>
                        </div>
                    </div>
                    <div class="post-content">${post.content}</div>
                    ${post.hasImage ? `<div class="post-image"><img src="${post.imageUrl || defaultImageUrl}" alt="Community Post Image"></div>` : ''}
                    <div class="post-actions">
                        <button class="post-action ${likedPosts.has(post.id) ? 'active' : ''}" onclick="toggleLike('post', ${post.id})">
                            ❤️ ${post.likes} Likes
                        </button>
                        <button class="post-action" onclick="showComments(${post.id})">
                            💬 ${post.comments} Comments
                        </button>
                        <button class="post-action" onclick="sharePost(${post.id})">
                            📤 ${post.shares} Shares
                        </button>
                    </div>
                </div>
            `).join('');
        }
        
        // --- Messaging Functions ---
        
        function renderConversations() {
            const container = document.getElementById('conversationList');
            container.innerHTML = Object.keys(allMessages).map(username => {
                const messages = allMessages[username];
                const lastMessage = messages[messages.length - 1];
                const preview = lastMessage ? lastMessage.content : "No messages yet";
                
                return `
                    <div class="conversation-item ${username === currentConversation ? 'active' : ''}" onclick="switchConversation('${username}')">
                        <div class="conversation-avatar">${username.charAt(0)}</div>
                        <div class="conversation-details">
                            <p class="conversation-user">${username}</p>
                            <p class="conversation-preview">${lastMessage.sender === "You" ? "You: " : ""}${preview}</p>
                        </div>
                    </div>
                `
            }).join('');
        }
        
        function renderMessages() {
            const container = document.getElementById('messageList');
            const messages = allMessages[currentConversation] || [];

            if (messages.length === 0) {
                 container.innerHTML = `<p style="text-align: center; color: rgba(255,255,255,0.5);">No messages yet. Say hi!</p>`;
                 return;
            }

            container.innerHTML = messages.map(message => `
                <div class="message ${message.sender === 'You' ? 'from-me' : ''}">
                    <div class="message-header">
                        <span class="message-sender">${message.sender}</span>
                        <span class="message-time">${message.time}</span>
                    </div>
                    <div class="message-content">${message.content}</div>
                </div>
            `).join('');
            
            // Scroll to the bottom
            container.scrollTop = container.scrollHeight;
        }

        function switchConversation(username) {
            currentConversation = username;
            document.getElementById('messageInput').placeholder = `Message ${username}...`;
            renderConversations();
            renderMessages();
        }
        
        function sendMessage() {
            const messageInput = document.getElementById('messageInput');
            const messageText = messageInput.value.trim();
            
            if (messageText && currentConversation) {
                const newMessage = {
                    sender: 'You',
                    time: 'just now',
                    content: messageText
                };
                
                allMessages[currentConversation].push(newMessage);
                renderMessages();
                renderConversations(); // To update the preview
                messageInput.value = '';
            }
        }
        
        function messageUser(username) {
            showTab('messages');
            
            if (!allMessages[username]) {
                allMessages[username] = [];
            }
            
            switchConversation(username);
            document.getElementById('messageInput').focus();
        }

        function updateFilters() {
            const category = document.getElementById('category').value;
            const makeSelect = document.getElementById('make');
            
            let optionsHtml = '<option value="">Any Make/Brand</option>';
            if (category === 'vehicles') {
                optionsHtml += `<option value="toyota">Toyota</option><option value="ford">Ford</option><option value="jeep">Jeep</option>`;
            } else if (category === 'gear') {
                optionsHtml += `<option value="arb">ARB</option><option value="kings">Adventure Kings</option><option value="dometic">Dometic</option>`;
            } else if (category === 'parts') {
                optionsHtml += `<option value="arb">ARB</option><option value="tjm">TJM</option><option value="old-man-emu">Old Man Emu</option>`;
            } else {
                optionsHtml += `<option value="toyota">Toyota</option><option value="ford">Ford</option><option value="jeep">Jeep</option><option value="arb">ARB</option><option value="tjm">TJM</option><option value="kings">Adventure Kings</option><option value="dometic">Dometic</option><option value="old-man-emu">Old Man Emu</option>`;
            }
            makeSelect.innerHTML = optionsHtml;
        }

        function updatePriceDisplay() {
            const price = document.getElementById('priceRange').value;
            document.getElementById('priceDisplay').textContent = `Up to $${parseInt(price).toLocaleString()}`;
        }

        function applyFilters() {
            const category = document.getElementById('category').value;
            const make = document.getElementById('make').value;
            const condition = document.getElementById('condition').value;
            const maxPrice = parseInt(document.getElementById('priceRange').value);

            document.querySelectorAll('.product-card').forEach(card => {
                const cardCategory = card.dataset.category;
                const cardMake = card.dataset.make;
                const cardCondition = card.dataset.condition;
                const cardPrice = parseInt(card.dataset.price);

                const matchesCategory = !category || cardCategory === category;
                const matchesMake = !make || cardMake === make;
                const matchesCondition = !condition || cardCondition === condition;
                const matchesPrice = cardPrice <= maxPrice;

                card.style.display = (matchesCategory && matchesMake && matchesCondition && matchesPrice) ? 'block' : 'none';
            });
        }

        function updatePostForm() {
            const postType = document.getElementById('postType').value;
            document.getElementById('marketplaceFields').style.display = (postType === 'marketplace') ? 'block' : 'none';
        }

        function handlePostSubmission(e) {
            e.preventDefault();
            const postType = document.getElementById('postType').value;
            const title = document.getElementById('postTitle').value;
            const description = document.getElementById('postDescription').value;
            if (!title || !description) {
                alert('Please fill in all required fields');
                return;
            }
            const successMessage = document.createElement('div');
            successMessage.innerHTML = `<div style="background: rgba(40, 167, 69, 0.2); border: 2px solid #28a745; border-radius: 10px; padding: 1rem; margin-bottom: 1rem; color: #28a745;"><strong>✅ Success!</strong> Your ${postType === 'marketplace' ? 'listing' : 'post'} has been published.</div>`;
            document.getElementById('postForm').prepend(successMessage);
            document.getElementById('postForm').reset();
            setTimeout(() => successMessage.remove(), 5000);
        }

        function handleFileUpload(e) {
            const files = e.target.files;
            if (files.length > 0) {
                document.querySelector('.file-upload').innerHTML = `<p>📁 ${files.length} file(s) selected</p><small style="color: rgba(255,255,255,0.7);">${Array.from(files).map(f => f.name).join(', ')}</small>`;
            }
        }

        function toggleLike(type, id) {
            const set = type === 'product' ? likedProducts : likedPosts;
            const data = type === 'product' ? products : communityPosts;
            const item = data.find(item => item.id === id);
            
            if (set.has(id)) {
                set.delete(id);
                item.likes--;
            } else {
                set.add(id);
                item.likes++;
            }
            
            if (type === 'product') {
                renderProducts();
            } else {
                renderCommunityPosts();
            }
        }

        function shareProduct(id) {
            const product = products.find(p => p.id === id);
            if (!product) return;
            const shareData = { title: product.title, text: product.description, url: window.location.href };
            if (navigator.share) {
                navigator.share(shareData);
            } else {
                navigator.clipboard.writeText(`${shareData.title}: ${shareData.text}`).then(() => showNotification('Link copied to clipboard!'));
            }
        }

        function sharePost(id) {
            const post = communityPosts.find(p => p.id === id);
            if (post) {
                post.shares++;
                renderCommunityPosts();
                showNotification('Post shared!');
            }
        }

        function showComments(postId) { showNotification('Comments feature coming soon!'); }
        function toggleProfile() { showNotification('Profile menu coming soon!'); }

        function showNotification(message) {
            const notification = document.createElement('div');
            notification.innerHTML = `<div style="position: fixed; top: 100px; right: 20px; background: linear-gradient(45deg, #ff6b35, #f7931e); color: white; padding: 1rem 2rem; border-radius: 10px; box-shadow: 0 10px 30px rgba(0,0,0,0.3); z-index: 1000; animation: slideIn 0.3s ease;">${message}</div>`;
            document.body.appendChild(notification);
            setTimeout(() => notification.remove(), 3000);
        }

    </script>

    <style>
        @keyframes slideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
    </style>
</body>
</html>